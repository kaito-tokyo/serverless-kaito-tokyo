---
import fetchApi from "../../../lib/strapi.js";
import type { NovelApp } from "../../../interfaces/NovelApp.js";

export async function getStaticPaths() {
  const vipNovelApps = await fetchApi<NovelApp[]>({
    endpoint: "novel-apps",
    wrappedByKey: "data",
    query: {
      "filters[Vip][$eq]": "true",
    },
  });

  return vipNovelApps.map((app) => ({
    params: { slug: app.slug },
    props: app,
  }));
}
type Props = NovelApp;

const app = Astro.props;
---

<!doctype html>
<html lang={app.Lang}>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{app.Title}</title>
    <Fragment set:html={app.Head} />
  </head>

  <Fragment set:html={app.Body} />
</html>
